{% extends 'base.html' %}
{% load static %} 

<!-- Bilge: HTML for the label sort view with a display of labeled notes -->

{% block content %}
<style>
    visual {
        display: flex;
    }
    .sidebar {
        flex: 0.5;
        color: #333;
        width: 80px;
        padding: 20px 0;
        margin-right:10px;
    }
    .sidebar a {
        display: block;
        text-align: left;
        margin-bottom: 20px;
        color: white;
        text-decoration: none;
        font-size: 20px;
    }
    .sidebar img {
        width: 40px;
        height: 30px;
        margin-right: 7px;
        label-color:black;
    }
    .note {
        flex: 2.5;
        display: -webkit-flex;
        color: #fff;
        width: 80px;
        padding: 20px 0;
        -webkit-flex-direction: row;
        flex-direction: column;
        height: 100%;
    }
    .addLabel{
        display:inline-block;
    }
    .addLabel img{
        width: 40px;
        height: 30px;
    }
    .note-box {
        -webkit-flex-direction: column;
        -webkit-flex-direction: column;
        display: flex;
        flex-direction: column;
        text-align: center;
        -webkit-box-sizing:border-box;
        color: #333;
        -webkit-border-radius: 8px;
        border: 2px solid #333;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        min-height: 245px;
        position: relative;
        -webkit-align-items: center;
        margin:7px;
    }
    .note-form input[type="text"] {
        flex: 1;
        padding: 10px;
        margin-right: 10px;
        margin-bottom: 10px;
        font-size: 16px;
        min-height: 50px;
        max-height: 200px;
    }
    .note-form button {
        padding: 10px 20px;
        background-color: #003087;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .note-title {
        flex:1;
        font-size: 18px;
        font-weight: bold;
        background-color:var(--Section-Color);
        margin-bottom: 5px;
    }
    .note-description {
        flex:2;
        font-size: 14px;
        background-color: #365486;
        margin-bottom: 10px;
    }


</style>
<visual>
    <div class="sidebar">
        <a href="{% url 'visual' %}"><img src="{% static 'icons/camera-visual.png' %}" alt="Visual Notes">Visual Notes</a>
        <button onclick="createLabel()"><img src="{% static 'icons/edit-label-visual.png' %}" alt="create label">Create Label</button>
        <script>
            function createLabel() {
                var T = document.getElementById("CreateLabel");
                if (T.style.display === "block") {
                    T.style.display = "none";
                } else {
                    T.style.display = "block";
                }
            }
        </script>
        {% for label in labels %}
        <a href="{% url 'visual_label_sort' label.label_name %}"><img src="{% static 'icons/label-visual.png' %}" alt="Labels">{{label.label_name}}</a>
        {% endfor %}
    </div>
    <div id="CreateLabel" style="display: none;">
        <!-- To add Label -->
        <form class="note-form" method="POST" action="">
            {% csrf_token %} <!-- CSRF verification, security satisfaction -->
            <input type="text" name="createLabel" placeholder="Label Name"><p></p>
            <button type="note-button" name="visualCreateLabel" >Create Label</button>
        </form>
    </div>
    <div class="note">
        <!-- To add Note to Visual Database -->
        <form class="note-form" method="POST" action="">
            {% csrf_token %} <!-- CSRF verification, security satisfaction -->
            <input type="text" name="title" placeholder="Title"><p></p>
            <input type="text" name="description" placeholder="Take Note">
            <div id="AddLabel" class="addLabel">
                <img style="display:block;" onclick="selectLabel()" src="{% static 'icons/label-visual.png' %}" alt="select label"><span style="color:black">Add Label</span></img>
            </div>
            <script>
                function selectLabel() {
                    var T = document.getElementById("LabelSelect");
                    var i = document.getElementById("AddLabel");
                    if (T.style.display === "block") {
                        T.style.display = "none";
                        i.style.display = "inline-block";
                    } else {
                        T.style.display = "inline-block";
                        i.style.display = "none";
                    }
                }
            </script>
            <div id="LabelSelect" class="label-selection" style="display:none;">
                <select name="labelselect" class="label-dropdown">
                    {% for label in labels %}
                        <option value="{{label}}">{{ label.label_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="note-button" name="visualNoteSubmit" >Note</button>
        </form>
        <div class="note-pad">
            {% for visual in notes %}
            {% if visual.note_label == label %}
            <div class="note-box">
                <div class="note-title">
                <h2 name="title">{{visual.note_title}}</h2>
                </div>
                <div class="note-description">
                <h3 name="description">{{visual.note_description}}</h3>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</visual>

{% endblock %}